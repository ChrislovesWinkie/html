<!DOCTYPE html>
<html>
<head>
  <title>Current Location Example</title>
  <style>
    #map {
      height: 400px;
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>Current Location</h1>
  <div id="map"></div>

  <script>
    // Initialize the map
    let map;
    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: { lat: 0, lng: 0 },
        zoom: 8
      });
    }

    // Get the user's current location
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, handleLocationError);
      } else {
        handleLocationError(true);
      }
    }

    // Display the current location on the map
    function showPosition(position) {
      const latLng = {
        lat: position.coords.latitude,
        lng: position.coords.longitude
      };

      // Create a marker for the current location
      const marker = new google.maps.Marker({
        position: latLng,
        map: map,
        icon: 'https://maps.google.com/mapfiles/ms/icons/blue-dot.png'
      });

      // Center the map on the current location
      map.setCenter(latLng);
      map.setZoom(15);
    }

    // Handle location errors
    function handleLocationError(error) {
      let errorMessage;
      switch (error.code) {
        case error.PERMISSION_DENIED:
          errorMessage = "User denied the request for Geolocation.";
          break;
        case error.POSITION_UNAVAILABLE:
          errorMessage = "Location information is unavailable.";
          break;
        case error.TIMEOUT:
          errorMessage = "The request to get user location timed out.";
          break;
        case error.UNKNOWN_ERROR:
          errorMessage = "An unknown error occurred.";
          break;
      }
      alert(errorMessage);
    }

    // Load the Google Maps API and initialize the map
    function loadGoogleMapsAPI() {
      const script = document.createElement('script');
      script.src = 'https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap';
      script.async = true;
      document.body.appendChild(script);
    }

    // Call the functions to get the user's location and display it on the map
    loadGoogleMapsAPI();
    getLocation();
  </script>
</body>
</html>
